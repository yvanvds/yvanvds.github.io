---
layout: single
title: Nuget Packages with Native Libraries
---

This post is about creating a NuGet package which includes native libraries for Android. I am going to assume that you have a few things in place:

* A .NET standard library project with your C# code, which can be compiled as a nuget package.
* A C# Android project which will load and use the library.

At this point, your app should run when you reference the library project directly. If not, take a look at my previous posts. When you are certain your app works as expected, loads the native .so library and uses it, you should remove the direct reference.

** Change the library project **
The library project should already contain a folder sturcture like this

`libs\armeabi-v7a\libWhatever.so`

Now you should add a `build` folder and a `.targets` file:

`build\Your.Project.ID.targets`

The name of this file is important. It should be equal to your project/package ID. If you're not certain, look in

`properties -> Package -> Package ID`

While you are at that page, you might want to fill in some other information if you haven't done that already. A package ID should be unique. For example, when I created a .NET wrapper for the android version of my YSE library, I called it Yse.NET.Android. This means my targets file is called `Yse.NET.Android.targets`.

When you try and create a nuget package at this point, the targets file will not be included. We still have to tell Visual Studio what to do with it, which cannot be done from the interface. Open your project's `.csproj` file and add this itemgroup:

{% highlight xml tabsize=2 %}
<ItemGroup>
    <Content Include="build\*.*">
        <Pack>true</Pack>
        <PackagePath>build;</PackagePath>
    </Content>
</ItemGroup>
{% endhighlight %}

